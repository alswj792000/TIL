# 09. í…œí”Œë¦¿ ë¬¸ë²• - ì‹¤ì „

ì„¹ì…˜: í…œí”Œë¦¿ ë¬¸ë²•-ì‹¤ì „
ìˆ˜ê°•ì¼: 2022ë…„ 9ì›” 26ì¼
ì§„í–‰ë„: 1

# watch ì†ì„±

[Watch | Cracking Vue.js](https://joshua1988.github.io/vue-camp/syntax/watch.html)

[Watchers | Vue.js](https://vuejs.org/guide/essentials/watchers.html#basic-example)

íŠ¹ì • ë°ì´í„°ì˜ ë³€í™”ë¥¼ ê°ì§€í•˜ì—¬ ìë™ìœ¼ë¡œ íŠ¹ì • ë¡œì§ì„ ìˆ˜í–‰í•´ì£¼ëŠ” ì†ì„±ì´ë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ dataë¥¼ ëŒ€ìƒìœ¼ë¡œ ë„£ì„ ìˆ˜ ìˆê³ , dataì˜ ë³€í™”ì— ë”°ë¼ íŠ¹ì • ë¡œì§ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

```jsx
<body>
    <div id="app">
        {{ num }}
        <button v-on:click="addNum">increase</button>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
        new Vue({
            el: '#app',
            data: {
                num: 10
            },
            watch : { // ê¸°ë³¸ì ìœ¼ë¡œ dataë¥¼ ëŒ€ìƒìœ¼ë¡œ ë„£ì„ìˆ˜ ìˆê³ , dataì˜ ë³€í™”ì— ë”°ë¼ íŠ¹ì • ë¡œì§ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. 
                num : function(){ // numì´ë¼ëŠ” data ì†ì„±ì´ ë°”ë€Œê²Œ ë˜ë©´ ì´ ë¡œì§ì´ ì‹¤í–‰ë¨
                    this.logText();
                }
            },
            methods: {
                addNum: function(){
                    this.num = this.num + 1;
                },
                logText: function(){ // â€» addNumì´ ì‘ë™í•´ì„œ numì´ ë°”ë€Œê²Œ ë˜ë©´ logTextë¥¼ ì‹¤í–‰í•˜ë„ë¡ êµ¬í˜„ â†’ **watch ì‚¬ìš©**
                    console.log('changed');
                }
            }
        })
    </script>
</body>
```

addNum ë©”ì„œë“œê°€ ì‘ë™í•´ì„œ numì˜ ê°’ì´ ë°”ë€Œê²Œ ë˜ë©´ ì½˜ì†”ì— changedë¥¼ ì°ë„ë¡ êµ¬í˜„í•˜ê³ ì í•œë‹¤.

ì´ë•Œ `watch`ë¥¼ ì‚¬ìš©í•´ num data ì†ì„±ì´ ë°”ë€” ê²½ìš° logTextë¥¼ ì‹¤í–‰í•˜ì—¬ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

![Untitled](09%20%E1%84%90%E1%85%A6%E1%86%B7%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%86%BA%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%87%E1%85%A5%E1%86%B8%20-%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%8C%E1%85%A5%E1%86%AB%20800f66e53edd49a0919e0501e1730396/Untitled.png)

---

# watch ì†ì„± VS computed ì†ì„±

| watch | computed |
| --- | --- |
| ë‹¨ìˆœí•œ ê°’ì— ëŒ€í•œ ê³„ì‚°(ì—°ì‚°). 
vueì˜ validation(ìœ íš¨ì„±ê²€ì‚¬) ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ëŒ€ë¶€ë¶„ì˜ computedë¡œ ì´ë£¨ì–´ì ¸ìˆë‹¤.
watchëŠ” ê³„ì†í•´ì„œ ê°’ì˜ ë³€í™”ë¥¼ ì¶”ì í•˜ê³  ìˆê¸°ë•Œë¬¸ì— ê¸°ë³¸ì ìœ¼ë¡œ newValue(ê°±ì‹ ëœ ê°’)ì™€ oldValue(ìƒˆë¡œìš´ ê°’)ë¥¼ ë°›ì„ìˆ˜ ìˆë‹¤. | ë§¤ë²ˆ ì‹¤í–‰ë˜ëŠ”ê²ƒì´ ë¶€ë‹´ìŠ¤ëŸ¬ìš´ ë¬´ê±°ìš´ ë¡œì§ì— ì£¼ë¡œ ì‚¬ìš©
íŠ¹íˆ ë°ì´í„° ìš”ì²­ì— ì í•©í•˜ë‹¤.
ê·¸ë˜ì„œ ë°ì´í„° ìš”ì²­ì„ í• ë•Œ methodsì— ìˆëŠ” ë‚´ìš©ì„ ì—®ì–´ì£¼ëŠ”ê²ƒì´ ì¢‹ë‹¤. |

â†’ ë‹¨ìˆœí•œ textì˜ ì…ë ¥ì„ ë°›ì•„ ê±°ê¸°ì— ëŒ€í•œ validationê°’ì„ ìƒì„±í•˜ëŠ” ê²ƒì€ computedë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤.

### âœ” numì´ ë³€ê²½ë˜ë©´ doubleNumì˜ ê°’ë„ ë³€ê²½ | ë³€ê²½ëœ numê°’ì„ ì½˜ì†”ì— ì¶œë ¥

```jsx
<body>
    <div id="app">
        <p>{{ num }}</p>
        <p>{{ doubleNum }}</p>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
        new Vue({
            el: '#app',
            data: {
                num: 10
            },
            computed: { // ë‹¨ìˆœí•œ ê°’ì— ëŒ€í•œ ê³„ì‚°.
                    return this.num *2;
                }
            },
            watch: { // ë¬´ê±°ìš´ ë¡œì§
                // watchëŠ” ê¸°ë³¸ì ìœ¼ë¡œ newValue(ê°±ì‹ ëœ ê°’)ì™€ oldValue(ìƒˆë¡œìš´ ê°’)ë¥¼ ë°›ëŠ”ë‹¤. 
                num: function(newValue, oldValue){
                    this.fetchUserByNumber(newValue); // ìƒˆë¡œ ë°”ë€ ê°’ì„ methodsì— ì¸ìë¡œ ë„˜ê¸´ë‹¤.
                }
            },
            methods: {
                fetchUserByNumber: function(num){
                    // console.log(num);
                    // ê°•ì‚¬ë‹˜ì€ axiosë¥¼ ì´ìš©í•´ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ëŠ”ê²ƒì´ watchì˜ ì˜ë¯¸ì— ê°€ì¥ ë¶€í•©í•˜ëŠ” ë¡œì§ì´ë¼ê³  ìƒê°
                    axios.get(num);
                }
            }
        })
    </script>
</body>
```

1. `computed`ë¥¼ ì´ìš©í•´ numê°’ì˜ 2ë°°ê°’ ì¶œë ¥
2. `watch`ë¥¼ ì´ìš©í•´ numê°’ì´ ë³€ê²½ë ë•Œë§ˆë‹¤ ìƒˆë¡œ ë°”ë€ ê°’ì„ `methods`ì— ì¸ìë¡œ ë„˜ê²¨ console.log()ë¥¼ ì´ìš©í•´ ì¶œë ¥

[Computed Properties and Watchers - Vue.js](https://v2.vuejs.org/v2/guide/computed.html)

<aside>
ğŸ’¡ However, it is often a better idea to use a `computed` property rather than an imperativeÂ `watch` callback. 
ëª…ë ¹í˜• `watch` ì½œë°±ë³´ë‹¤ `computed` ì†ì„±ì„ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ëŒ€ë¶€ë¶„ì˜ ì¼€ì´ìŠ¤ì—ì„œ ë” ë‚˜ì€ ê²½ìš°ê°€ ë§ë‹¤.

â†’ ë”°ë¼ì„œ ì›¬ë§Œí•˜ë©´ `computed`ë¥¼ ì“°ëŠ”ê²ƒì´ ì¢‹ë‹¤.
ì‹¤ì œë¡œë„ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí• ë•Œ, computedë¡œ í•´ê²°í•  ìˆ˜ ìˆëŠ”ë° êµ³ì´ watchë¡œ ì‚¬ìš©í–ˆì„ ê²½ìš° ì½”ë“œê°€ ë„ˆì €ë¶„í•´ì§„ë‹¤ëŠ” ë¬¸ì œì ì´ ìˆë‹¤. 
(computedê°€ ìºì‹±ê³¼ ê°™ì€ ë‚´ë¶€ì ì¸ íŠœë‹ì´ ë” ë˜ì–´ìˆê¸°ë•Œë¬¸ì— watchë³´ë‹¤ëŠ” `computed`ë¡œ ê°„ë‹¨í•œ ê°’ë“¤ì„ ê³„ì‚°í•˜ëŠ”ê²ƒì„ ë” ì¶”ì²œ)

</aside>

### âœ” Form Validation

[Form Handling | Cracking Vue.js](https://joshua1988.github.io/vue-camp/syntax/form.html#form-%E1%84%8C%E1%85%A6%E1%84%8C%E1%85%A1%E1%86%A8%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5)

ì‚¬ìš©ìì˜ ì…ë ¥ì´ ìœ íš¨í•œì§€ ê²€ì‚¬í•˜ëŠ” ì‘ì—…ì´ë‹¤.

Vueì—ì„œëŠ” [vee-validation](https://vee-validate.logaretm.com/v4/), [Vuelidate](https://vuelidate.js.org/) ë“±ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ í¼ì˜ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•  ìˆ˜ ìˆë‹¤

---

# computed ì†ì„±ì„ ì´ìš©í•œ í´ë˜ìŠ¤ ì½”ë“œ ì‘ì„± ë°©ë²•

### âœ” dataì— ìˆëŠ” ê°’ì„ classëª…ìœ¼ë¡œ ì—°ê²°

```jsx
<style>
	.warning {
		color: red;
	}
</style>

....

<body>
    <div id="app">
        <p v-bind:class="cname">Hello</p> <!-- dataì— ë“¤ì–´ìˆëŠ” ê°’ì„ classë¡œ ì—°ê²°í•  ìˆ˜ ìˆë‹¤. -->
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
        new Vue({
            el: '#app',
            data: {
                cname: 'blue-text', 
            }
        })
    </script>
</body>
```

### âœ” { calssì˜ ì´ë¦„: ì¡°ê±´ }

```jsx
<style>
	.warning {
		color: red;
	}
</style>

....

<body>
    <div id="app">
        <p v-bind:class="cname">Hello</p> 
        <p v-bind:class="{ warning: isError }">Vue</p> <!-- { classì˜ ì´ë¦„: ì¡°ê±´ }
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
        new Vue({
            el: '#app',
            data: {
                cname: 'blue-text', 
                isError: false
            }
        })
    </script>
</body>
</html>
```

ì¡°ê±´ì— ë”°ë¼ classì˜ ì¶”ê°€ ì—¬ë¶€ë¥¼ ê²°ì •í•œë‹¤. 

data  `isError`ê°€ trueì¼ë•ŒëŠ” í´ë˜ìŠ¤ì— warningì„ ì¶”ê°€í•˜ê³ , `isError`ê°€ falseì¼ë•ŒëŠ” í´ë˜ìŠ¤ì— warningì„ ì¶”ê°€í•˜ì§€ ì•ŠëŠ”ë‹¤.

### âœ” computedë¥¼ ì´ìš©í•´ classì˜ ì¶”ê°€ ì—¬ë¶€ë¥¼ ê²°ì •

```jsx
<style>
	.warning {
		color: red;
	}
</style>

....

<body>
    <div id="app">
        <p v-bind:class="cname">Hello</p> 
        <p v-bind:class="{ warning: isError }">Vue</p> 
        <p v-bind:class="errorTextColor">!!!</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
        new Vue({
            el: '#app',
            data: {
                cname: 'blue-text', 
                isError: false
            },
            computed: {
                errorTextColor: function(){ // êµ³ì´ v-bindë¡œ classë¶€í„° ë„£ì–´ì¤„ í•„ìš”ì—†ì´ computedë¡œ í•„ìš”í•œ ì´ë¦„ë§Œ ë„£ê¸°
                    // if (isError) {
                    //     return 'warning'
                    // } else {
                    //     return null;
                    // }

                    // ìœ„ ì½”ë“œë¥¼ ì‚¼í•­ì—°ì‚°ìë¥¼ ì‚¬ìš©í•´ í™• ì¤„ì—¬ì„œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤ : isErrorê°€ trueë©´ warning / falseë©´ null
                    return this.isError ? 'warning' : null; // computedì—ì„œ data ì†ì„±ì„ ì ‘ê·¼í•˜ë ¤ë©´ thisë¥¼ ë¶™ì—¬ì•¼í•œë‹¤.
                }
            }
        })
    </script>
</body>
</html>
```

êµ³ì´ ìœ„ ë‘ ë°©ë²•ì„ ì‚¬ìš©í•  í•„ìš” ì—†ì´ computedë¡œ í•„ìš”í•œ ê°’ì„ ë„£ëŠ”ë‹¤.

ì‚¼í•­ì—°ì‚°ìë¥¼ ì‚¬ìš©í•´ isErrorê°€ trueì´ë©´ warningì„, falseë©´ nullì„ ë„£ëŠ”ë‹¤.

![Untitled](09%20%E1%84%90%E1%85%A6%E1%86%B7%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%86%BA%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%87%E1%85%A5%E1%86%B8%20-%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%8C%E1%85%A5%E1%86%AB%20800f66e53edd49a0919e0501e1730396/Untitled%201.png)

![Untitled](09%20%E1%84%90%E1%85%A6%E1%86%B7%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%86%BA%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%87%E1%85%A5%E1%86%B8%20-%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%8C%E1%85%A5%E1%86%AB%20800f66e53edd49a0919e0501e1730396/Untitled%202.png)

isErrorì˜ true/falseì— ë”°ë¼ styleì´ ë°”ë€ŒëŠ”ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.